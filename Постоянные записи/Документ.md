---
tags:
  - постоянные
  - 1с
  - объект_конфигурации
  - документ
links:
  - "[[Объект конфигурации]]"
  - "[[Форма объекта конфигурации]]"
  - "[[ Типы данных в 1С ]]"
  - "[[Регистр накопления]]"
---
**Документ** - объект конфигурации, предназначенный для описания *информации о совершенных хозяйственных операциях* или *событиях в жизни предприятия*.

В своей структуре, *Документ* очень похож на [[Справочник]].

В отличии от [[Справочник|Справочника]] или других [[Объект конфигурации|объектов конфигурации]], *Документ* обладает механизмом *проведения*.

**Проведение Документа** - механизм, который позволяет создать записи в регистрах (например, в [[Регистр накопления|Регистре накопления]]), отражая влияние документа на учет.

Главное отличие *Документа* от *Справочника* заключается в *привязке ко времени*, которая вытекает из *момента проведения Документа*, т.е. того момента, когда *Документ* оказал влияние на учет.

До момента проведения, *Документ не влияет на учет* и находится в статусе *не проведенного Документа* - черновика.

**Привязка ко времени** необходима в связи с бизнес-логикой, которую отражает собой *Документ* - *некоторое событие, которое в итоге должно оказать некоторое влияние на учёт*.

### Структура документа

Каждый документ обладает набором **стандартных реквизитов**, которые создаются платформой автоматически:
- **Дата** - определяет положение документа на оси времени (с точностью до секунды).
- **Номер** - уникальный идентификатор документа (обычно генерируется автоматически благодаря свойству *Автонумерация*).
- **ПометкаУдаления**
- **Проведен**

Помимо стандартных реквизитов, разработчик создает собственные:
- **Реквизиты шапки** - общая информация для всего документа (например, *Склад*, *Контрагент*, *Организация*).
- **Табличные части** - для хранения списков однотипной информации (например, *Список товаров*, *Перечень услуг*). Табличная часть имеет свои реквизиты (колонки), например: *Товар*, *Количество*, *Цена*, *Сумма*.

### Формы документа

Для взаимодействия с пользователем документ имеет несколько основных форм:
- **Форма объекта** (Форма документа) - для создания, просмотра и редактирования одного конкретного документа.
- **Форма списка** - для просмотра списка документов в табличном виде.
- **Форма выбора** - для выбора конкретного документа из списка (например, при выборе документа-основания).

### Движения документа

Документ является **Регистратором** для записей в регистрах.
Набор записей, созданных документом в регистрах, называется **Движениями документа**.
Разработчик описывает алгоритм формирования движений в модуле объекта документа, в обработчике события `ОбработкаПроведения`.

### Типы данных

При создании документов используются как **примитивные типы** (Число, Строка, Дата, Булево), так и типы, определяемые конфигурацией.

**Типообразующие объекты** - объекты конфигурации, создание которых приводит к появлению новых типов данных.
Например, создание справочника "Склады" добавляет типы:
- *СправочникСсылка.Склады*
- *СправочникОбъект.Склады*
- и др.

Это позволяет использовать ссылочные типы данных в реквизитах документов.

### Свойства и настройки

- **Значение заполнения** - свойство реквизита, позволяющее задать значение по умолчанию (например, подставлять основной склад).
- **Проверка заполнения** - свойство, делающее поле обязательным для заполнения (значение *Выдавать ошибку*).
- **Автонумерация** - свойство, обеспечивающее автоматическую генерацию уникальных номеров.

### Программирование логики работы

Для автоматизации действий (например, расчета суммы) используются **Модули форм** и **Обработчики событий**.

#### Обработчики событий
Позволяют "перехватить" действия пользователя.
Пример: событие `ПриИзменении` для поля "Количество".
```bsl
&НаКлиенте
Процедура МатериалыКоличествоПриИзменении(Элемент)
	// Получаем текущую строку табличной части
	СтрокаТабличнойЧасти = Элементы.Материалы.ТекущиеДанные;
	// Выполняем расчет
	СтрокаТабличнойЧасти.Сумма = СтрокаТабличнойЧасти.Количество * СтрокаТабличнойЧасти.Цена;
КонецПроцедуры
```

#### Общие модули
Для исключения дублирования кода (например, если расчет суммы нужен в разных документах), алгоритмы выносят в **Общие модули**.
- Процедуры в общем модуле должны быть помечены ключевым словом `Экспорт`, чтобы быть доступными извне.
- В свойствах общего модуля часто указывают `Клиент (управляемое приложение)` и снимают `Сервер`, если код предназначен для вызова с клиента.

Пример вызова из модуля формы:
```bsl
&НаКлиенте
Процедура МатериалыКоличествоПриИзменении(Элемент)
	СтрокаТабличнойЧасти = Элементы.Материалы.ТекущиеДанные;
	// Вызов процедуры из общего модуля "РаботаСДокументами"
	РаботаСДокументами.РассчитатьСумму(СтрокаТабличнойЧасти);
КонецПроцедуры
```

